# Sample configuration file for ISC dhcpd for Debian
#
#

# The ddns-updates-style parameter controls whether or not the server will
# attempt to do a DNS update when a lease is confirmed. We default to the
# behavior of the version 2 packages ('none', since DHCP v2 didn't
# have support for DDNS.)
ddns-update-style none;

# option definitions common to all supported networks...
option domain-name "mycompany.net";
option domain-name-servers 192.168.200.1, 192.168.200.2;

#option rfc3442-classless-static-routes code 121 = array of unsigned integer 8;
#option rfc3442-classless-static-routes 24, 10,255,2, 10,255,3,1,
#					24, 10,255,3, 10,255,2,1;

#option rfc3442-classless-static-routes code 121 = array of integer 8;
#option rfc3442-classless-static-routes 24, 10, 255, 2, 10, 255, 3, 1;
#option ms-classless-static-routes code 249 = array of integer 8;
#option ms-classless-static-routes 24, 10, 255, 2, 10, 255, 3, 1;

default-lease-time 600;
max-lease-time 7200;

# If this DHCP server is the official DHCP server for the local
# network, the authoritative directive should be uncommented.
#authoritative;

allow booting;

# Use this to send dhcp log messages to a different log file (you also
# have to hack syslog.conf to complete the redirection).
log-facility local1;

# No service will be given on this subnet, but declaring it helps the 
# DHCP server to understand the network topology.
# in this example, we serve DHCP requests from 192.168.0.(3 to 253)
# and we have a router at 192.168.0.1

################################# BOOT SERVER - DC1 ######################################################
subnet 10.255.3.0 netmask 255.255.255.0 {
	range 10.255.3.10 10.255.3.254;
	option broadcast-address 10.255.3.255;
	option routers 10.255.3.1;
	default-lease-time 1200;
        max-lease-time 7200;
	#option rfc3442-classless-static-routes 24, 10,255,2, 10,255,3,1;

  if exists user-class and option user-class = "iPXE" {
      #filename "http://IP_OF_YOUR_BOOT_SERVER/boot.php?mac=${net0/mac}&hostname=${hostname}&asset=${asset:uristring}";
      filename "http://10.255.3.2/boot.php?mac=${net0/mac}&hostname=${hostname}&asset=${asset:uristring}";
  }
  else {
      filename "undionly.kpxe";
  }
}

##################################### BOOT SERVER - DC2 ###################################################

subnet 10.255.2.0 netmask 255.255.255.0 {
  range 10.255.2.10 10.255.2.254;
  option broadcast-address 10.255.2.255;
#  option routers 10.255.2.1;
#  option domain-name-servers 192.168.178.1; # our router, again
  #filename "pxelinux.0"; # (this we will provide later)
  #filename "undionly.kpxe";

  if exists user-class and option user-class = "iPXE" {
      #filename "http://IP_OF_YOUR_BOOT_SERVER/boot.php?mac=${net0/mac}&hostname=${hostname}&asset=${asset:uristring}";
      filename "http://10.255.3.2/boot.php?mac=${net0/mac}&hostname=${hostname}&asset=${asset:uristring}";      
  }
  else {
      filename "undionly.kpxe";
  }
}


############################################### DC1 - REGION  ############################################################

host sbc1.dc1 {
	hardware ethernet a0:36:9f:e7:6a:e2;
	fixed-address 10.255.3.11;
	option host-name "sbc1.dc1";
}
host sbc2.dc1 {
	hardware ethernet a0:36:9f:e7:6b:4a;
	fixed-address 10.255.3.12;
	option host-name "sbc2.dc1";
}
host sbc3.dc1 {
	hardware ethernet a0:36:9f:f2:bb:02;
	fixed-address 10.255.3.13;
	option host-name "sbc3.dc1";
}
host sbc4.dc1 {
	hardware ethernet a0:36:9f:a1:08:02;
	fixed-address 10.255.3.14;
	option host-name "sbc4.dc1";
}
host sbc5.dc1 {
	hardware ethernet b4:96:91:35:54:52;
	fixed-address 10.255.3.15;
	option host-name "sbc5.dc1";
}
host sbc6.dc1 {
	hardware ethernet b4:96:91:35:65:06;
	fixed-address 10.255.3.16;
	option host-name "sbc6.dc1";
}

#######################################  DC2 - REGION  ##############################################

host sbc1.dc2 {
	hardware ethernet a0:36:9f:f2:11:86;
	fixed-address 10.255.2.12;
	option host-name "sbc1.dc2";
}

host sbc2.dc2 {
	hardware ethernet a0:36:9f:f2:11:f2;
	fixed-address 10.255.2.13;
	option host-name "sbc2.dc2";
}

host sbc3.dc2 {
	hardware ethernet a0:36:9f:f2:12:5e;
	fixed-address 10.255.2.14;
	option host-name "sbc3.dc2";
}

group {
	host sbc4.dc2 {
		hardware ethernet a0:36:9f:f2:12:a0;
		fixed-address 10.255.2.15;
		option host-name "sbc4.dc2";
	}

	next-server 10.255.3.2;                # our Server
	host tftpclient {
	    #filename "pxelinux.0"; # (this we will provide later)
	    filename "undionly.kpxe";
	}
}

host sbc5.dc2 {
	hardware ethernet b4:96:91:38:64:f6;
	fixed-address 10.255.2.16;
	option host-name "sbc5.dc2";
}

host sbc6.dc2 {
	hardware ethernet b4:96:91:38:65:6a;
	fixed-address 10.255.2.17;
	option host-name "sbc6.dc2";
}

